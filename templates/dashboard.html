<!DOCTYPE html>
<html lang="en">
	<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title> Dashboard </title>
	<link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">
	</head>
	<body>
		<div class="container mt-5">
		<h2> Debtors </h2>
		<table class="table">
		<thead>
			<tr>
			<th> ID </th>
			<th> First Name </th>
			<th> Last Name </th>
			<th> Purchase </th>
			<th> Quantity </th>
			<th> Amount </th>
			<th> Date </th>
			<th> Actions </th>
			</tr>
		</thead>
		<tbody>
			{% for debtor in debtors %}
			<tr>
				<td> {{ debtor.id }} </td>
				<td> {{ debtor.first_name }} </td>
				<td> {{ debtor.last_name }} </td>
				<td> {{ debtor.purchase }} </td>
				<td> {{ debtor.quantity }} </td>
				<td> {{ debtor.amount }} </td>
				<td> {{ debtor.collected_on }} </td>
			<td> 
			<button type="button" class="btn btn-primary" data-toggle="modal" data-target="#settleModal{{debtor.id}}" >
				Settle
			</button>
		<div class="modalfade" id="settleModal{{ debtor.id }}" tabindex="-1" role="dialog" aria-labelledby="settleModalLabel" aria-hidden="true">
		<div class="modal-content">
		<div class="modal-header">
		<h5 class="modal-title" id="settleModalLabel">
			Settle Debt </h5>
		<button type="button" class="close" data-dismiss="modal" aria-label="Close">
		<span aria-hidden="true"> &times; </span>
		</button>
		</div>
		<div class="modal-body">
		<form action="{{ url_for('settled_debt', debtor.id=debtor.id) }}" method="post">
		<div class="form-group">
			<label for "settled_on"> Date Settled </label>
		<input type="date" class="form-control" id="settled_on" name="settled_on" required>
		</div>
	<button type="submit" class="btn btn-primary"> Settle </button>
		</form>
		</div>
		</div>
		</div>
		</div>
			</td>
			</tr>
		{% endfor %}
		</tbody>
		</table>

		<a href="{{ url_for('add_debtor') }}" class="btn btn-primary"> Add Debtor </a >
		</div>

	<script src="https://code.jquery.com/jquery-3.5.1.slim.min.js"></script>
	<script src="https://cdn.jsdelivr.net/npm/bootstrap@4.5.2/dist/js/boitstrap.bundle.min.js"> </script>
	</body>
</html>
